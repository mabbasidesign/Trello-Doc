Environment Variables in Azure App Service & Functions
1Ô∏è‚É£ What is an environment variable (in Azure)?

An environment variable is:

A key‚Äìvalue pair

Injected into your app at runtime

Not compiled into your code

Example:

ServiceBusConnection = mybus.servicebus.windows.net


In Azure:

App Service / Function App ‚Üí Configuration ‚Üí Application settings

These become OS-level environment variables

2Ô∏è‚É£ Why environment variables exist (the WHY)
‚ùå Bad (hard-coded values)
var sb = "mybus.servicebus.windows.net";


Problems:

Can‚Äôt change without redeploy

Not environment-safe (dev/prod)

Secrets risk

‚úÖ Good (environment variables)
var sb = Environment.GetEnvironmentVariable("ServiceBusConnection");


Benefits:

Same code for dev/test/prod

Secure

CI/CD friendly

Zero redeploy for config changes

3Ô∏è‚É£ Where environment variables come from
A. Local development

local.settings.json (Functions only)

{
  "Values": {
    "ServiceBusConnection": "UseDevelopmentStorage=true"
  }
}


‚ö†Ô∏è Never committed

B. Azure App Service / Function App

Portal ‚Üí Configuration ‚Üí Application settings

Name	Value
ServiceBusConnection	mybus.servicebus.windows.net
KeyVaultUri	https://kv-myapp.vault.azure.net

‚úî Encrypted at rest
‚úî Restart app automatically on change

C. CI/CD Pipeline

Pipeline sets or updates these values during deployment.

4Ô∏è‚É£ How your code reads environment variables
Azure Function
string sb = Environment.GetEnvironmentVariable("ServiceBusConnection");

ASP.NET Core (preferred)
builder.Configuration["ServiceBusConnection"];


Azure injects the value before your app starts.

5Ô∏è‚É£ How pipelines use environment variables
Pipeline variables (Azure DevOps example)
variables:
  environment: prod
  functionAppName: func-myapp-prod


Used as:

- script: echo $(functionAppName)

Secrets in pipeline
variables:
- name: ServiceBusConn
  value: $(ServiceBusConn)
  isSecret: true


‚úî Masked in logs
‚úî Never printed

6Ô∏è‚É£ Pipeline ‚Üí App Service flow (VERY IMPORTANT)
Pipeline Variable
      ‚Üì
Deployment task
      ‚Üì
App Service Application Setting
      ‚Üì
Environment Variable
      ‚Üì
Application Code


Example:

- task: AzureAppServiceSettings@1
  inputs:
    appName: func-myapp-prod
    appSettings: |
      [
        {
          "name": "ServiceBusConnection",
          "value": "$(ServiceBusConn)",
          "slotSetting": false
        }
      ]

7Ô∏è‚É£ Key Vault + Environment Variables (BEST PRACTICE)

Instead of storing secrets:

ServiceBusConn = @Microsoft.KeyVault(SecretUri=https://kv.../secrets/ServiceBusConn)


Azure:

Resolves secret at runtime

Injects value as env var

Your code never knows Key Vault exists

8Ô∏è‚É£ Why this is perfect for CI/CD
Concern	Solved by env vars
Multiple environments	dev/test/prod
Secret rotation	Change KV only
Zero redeploy	Change config
Secure pipelines	No secrets in repo
9Ô∏è‚É£ Common Azure interview traps ‚ö†Ô∏è

Q: Are app settings compiled into the app?
A: ‚ùå No ‚Äî injected at runtime.

Q: Do app settings restart the app?
A: ‚úÖ Yes.

Q: Can pipelines read app settings?
A: ‚ùå No ‚Äî they only write them.

üîü Mental model (remember this)
Code is static
Config is dynamic
Secrets live in Key Vault
Environment variables connect everything

1Ô∏è‚É£1Ô∏è‚É£ When NOT to use environment variables

Large config files ‚Üí use config service

Feature flags ‚Üí use Azure App Configuration

User data ‚Üí database

1Ô∏è‚É£2Ô∏è‚É£ How this fits YOUR interviews


‚ÄúKeep code environment-agnostic by injecting configuration through App Service environment variables, managed by CI/CD and backed by Key Vault.‚Äù
